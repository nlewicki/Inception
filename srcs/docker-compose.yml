services:
  nginx:
    build: ./requirements/nginx #baut nginx aus lokalen Dockerfile
    ports:	#ports gehoeren zu service, nicht zu netzwerk
    - "443:443"  #localhost:443, container:443
    - "80:80"
    volumes:
      - wp_site_data:/var/www/html
    networks:
      - inception
    depends_on:
      - wordpress

  wordpress:
    build: ./requirements/wordpress #Wordpress-container
    environment:
      DB_NAME: ${DB_NAME}
      DB_USER: ${DB_USER}
      DB_PASSWORD: ${DB_PASSWORD}
      DB_HOST: ${DB_HOST}
    volumes:
      - wp_site_data:/var/www/html
    networks:
      - inception
    depends_on:
      - mariadb

  mariadb:
    build: ./requirements/mariadb #mariadb-container
    environment:
      DB_NAME: ${DB_NAME}
      DB_USER: ${DB_USER}
      DB_PASSWORD: ${DB_PASSWORD}
      DB_ROOT_PASSWORD: ${DB_ROOT_PASSWORD}
    volumes:
      - wp_db_data:/var/lib/mysql
    networks:
      - inception

volumes:
  wp_db_data: #persistent speicher fuer mariadb daten
  wp_site_data: #persistent speicher fuer wordpress dateien

networks:
  inception: #damit container sich unterienander erreichen koennen

#yml erlaubt keine tabs, nur leerzeichen
#persistent speicher = daten bleiben auch nach neustart (externer Speicher)

#zum starten: docker-compose -f srcs/docker-compose.yml up --build
